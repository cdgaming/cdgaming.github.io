var _0x5cd8=['setOnlineData','https://www.gstatic.com/firebasejs/live/3.0/firebase.js','switchInRange','syncSwitchStart','_spriteset','syncSwitchEnd','this.moveOnlineXy()','variableInRange','signInAnonymously','startSync','ref','start','isTransferring','syncVariableStart','update','uid','characterName','value','OnlineAvatar','addChild','syncBusy','mapExists','then','playerInfo','charaName','connectNewMap','variableRef','meta','variables','sendPlayerInfo','loadMapData','getEventIdSequence','moveOnlineXy','distance','push','isMovementSucceeded','mapId','script','charaIndex','moveStraight','parameters','remove','src','async','off','setImage','initialize','awake','avatar_off','newMapId','onerror','moveTowardCharacter','list','apiKeyが正しく設定されていません。ご確認ください。','url','online','shouldDisplay','type','child_added','child_removed','child','character','avatarEvent','body','syncVariableEnd','setMoveSpeed','This\x20is\x20a\x20static\x20class','createElement','user','.info/connected','sendCustomInfo','prototype','call','apply','cancel','toLowerCase','isMapLoaded','key','events','locate','from','bind','database','catchException','appendChild','setValue','switchRef','selfRef','direction','_tilemap','sendSwitch','child_changed','realMoveSpeed','constructor','pages','pluginCommand','once','text/javascript','performTransfer','eventData','removePlayerInfo','length','onload','sendVariable','_events','onDisconnect','switches','mapRef','speed','val','_scene','avatarTemplate','isPreviousScene','setDirection','erase','avatarsInThisMap','auth'];(function(_0x1a7986,_0x5cd88b){var _0x19cf3f=function(_0x2cc541){while(--_0x2cc541){_0x1a7986['push'](_0x1a7986['shift']());}};_0x19cf3f(++_0x5cd88b);}(_0x5cd8,0xd3));var _0x19cf=function(_0x1a7986,_0x5cd88b){_0x1a7986=_0x1a7986-0x0;var _0x19cf3f=_0x5cd8[_0x1a7986];return _0x19cf3f;};function OnlineManager(){throw new Error(_0x19cf('0x59'));}function Game_Avatar(){this[_0x19cf('0x45')][_0x19cf('0x60')](this,arguments);}(function(){'use strict';OnlineManager[_0x19cf('0x3f')]=PluginManager[_0x19cf('0x3f')](_0x19cf('0x29'));OnlineManager['url']=_0x19cf('0x18');OnlineManager[_0x19cf('0x11')]={'id':0x0,'meta':{},'name':'','note':'','pages':[{'conditions':{'actorId':0x1,'actorValid':![],'itemId':0x1,'itemValid':![],'selfSwitchCh':'A','selfSwitchValid':![],'switch1Id':0x1,'switch1Valid':![],'switch2Id':0x1,'switch2Valid':![],'variableId':0x1,'variableValid':![],'variableValue':0x0},'directionFix':![],'image':{'tileId':0x0,'characterName':'','direction':0x2,'pattern':0x1,'characterIndex':0x0},'list':null,'moveFrequency':0x5,'moveRoute':{'list':[{'code':0x2d,'parameters':[_0x19cf('0x1d')],'indent':null},{'code':0x0,'parameters':[]}],'repeat':!![],'skippable':![],'wait':![]},'moveSpeed':0x5,'moveType':0x3,'priorityType':0x1,'stepAnime':![],'through':!![],'trigger':0x4,'walkAnime':!![]}],'x':0x0,'y':0x0};OnlineManager[_0x19cf('0x15')]=null;OnlineManager[_0x19cf('0xd')]=null;OnlineManager[_0x19cf('0x6e')]=null;OnlineManager[_0x19cf('0x6d')]=null;OnlineManager['variableRef']=null;OnlineManager['user']=null;OnlineManager['syncBusy']=![];OnlineManager[_0x19cf('0x45')]=function(){var _0x1c00ac=document[_0x19cf('0x5a')](_0x19cf('0x3c'));_0x1c00ac[_0x19cf('0x50')]=_0x19cf('0x3');_0x1c00ac[_0x19cf('0x41')]=this[_0x19cf('0x4d')];_0x1c00ac[_0x19cf('0x42')]=!![];_0x1c00ac[_0x19cf('0x8')]=this[_0x19cf('0x46')]['bind'](this);_0x1c00ac[_0x19cf('0x49')]=function(_0x3d16b5){throw new Error('firebaseの読み込みに失敗しました。F5でやり直してみてください。');};document[_0x19cf('0x56')][_0x19cf('0x6b')](_0x1c00ac);};OnlineManager[_0x19cf('0x46')]=function(){var _0x44fd04=this[_0x19cf('0x3f')];_0x44fd04[_0x19cf('0x55')]=+_0x44fd04[_0x19cf('0x55')];_0x44fd04['syncSwitchStart']=+_0x44fd04[_0x19cf('0x1a')];_0x44fd04[_0x19cf('0x1c')]=+_0x44fd04[_0x19cf('0x1c')];_0x44fd04[_0x19cf('0x24')]=+_0x44fd04[_0x19cf('0x24')];_0x44fd04[_0x19cf('0x57')]=+_0x44fd04[_0x19cf('0x57')];try{firebase['initializeApp']({'apiKey':_0x44fd04['apiKey'],'authDomain':_0x44fd04['authDomain'],'databaseURL':_0x44fd04['databaseURL']});}catch(_0x2cc751){throw new Error(_0x19cf('0x4c'));}this[_0x19cf('0x16')]();};OnlineManager['auth']=function(){firebase[_0x19cf('0x16')]()[_0x19cf('0x1f')]()[_0x19cf('0x2d')](this[_0x19cf('0x22')][_0x19cf('0x68')](this))['catch'](SceneManager[_0x19cf('0x6a')][_0x19cf('0x68')](SceneManager));};OnlineManager['start']=function(_0x3cdf0c){this[_0x19cf('0x5b')]=_0x3cdf0c;var _0x5d899f=firebase[_0x19cf('0x69')]()[_0x19cf('0x21')](_0x19cf('0x5c'));_0x5d899f['on']('value',function(_0x268355){if(_0x268355[_0x19cf('0xf')]()&&OnlineManager[_0x19cf('0x6e')])OnlineManager[_0x19cf('0x6e')]['onDisconnect']()[_0x19cf('0x40')]();});if(this[_0x19cf('0x2c')]())this[_0x19cf('0x30')]();if($gameSwitches)this[_0x19cf('0x20')]();};OnlineManager[_0x19cf('0x20')]=function(){if(!this[_0x19cf('0x5b')])return;if(this[_0x19cf('0x3f')][_0x19cf('0x1a')]||this[_0x19cf('0x3f')][_0x19cf('0x1c')]){if(this[_0x19cf('0x6d')])this[_0x19cf('0x6d')][_0x19cf('0x43')]();else this[_0x19cf('0x6d')]=firebase[_0x19cf('0x69')]()[_0x19cf('0x21')](_0x19cf('0xc'));OnlineManager[_0x19cf('0x2b')]=!![];this[_0x19cf('0x6d')][_0x19cf('0x2')](_0x19cf('0x28'),function(_0x3262ec){OnlineManager[_0x19cf('0x2b')]=![];});this[_0x19cf('0x6d')]['on']('child_added',function(_0x58c09a){$gameSwitches['setValue'](_0x58c09a[_0x19cf('0x64')],_0x58c09a[_0x19cf('0xf')](),!![]);});this[_0x19cf('0x6d')]['on'](_0x19cf('0x72'),function(_0x1f93ff){$gameSwitches[_0x19cf('0x6c')](_0x1f93ff['key'],_0x1f93ff[_0x19cf('0xf')](),!![]);});}if(this[_0x19cf('0x3f')][_0x19cf('0x24')]||this[_0x19cf('0x3f')][_0x19cf('0x57')]){if(this['variableRef'])this[_0x19cf('0x31')][_0x19cf('0x43')]();else this[_0x19cf('0x31')]=firebase['database']()[_0x19cf('0x21')](_0x19cf('0x33'));OnlineManager['syncBusy']=!![];this[_0x19cf('0x31')][_0x19cf('0x2')](_0x19cf('0x28'),function(_0x12364a){OnlineManager[_0x19cf('0x2b')]=![];});this[_0x19cf('0x31')]['on'](_0x19cf('0x51'),function(_0x1ef7d1){$gameVariables[_0x19cf('0x6c')](_0x1ef7d1[_0x19cf('0x64')],_0x1ef7d1[_0x19cf('0xf')](),!![]);});this['variableRef']['on']('child_changed',function(_0x10c2e4){$gameVariables['setValue'](_0x10c2e4[_0x19cf('0x64')],_0x10c2e4['val'](),!![]);});}};OnlineManager[_0x19cf('0x30')]=function(){if(!this[_0x19cf('0x5b')]||!this[_0x19cf('0x3f')]['avatarEvent'])return;if(this[_0x19cf('0xd')]){this[_0x19cf('0xd')][_0x19cf('0x43')]();this[_0x19cf('0x6e')][_0x19cf('0xb')]()[_0x19cf('0x61')]();this[_0x19cf('0x6e')]['remove']();}if(!$dataMap[_0x19cf('0x32')]||$dataMap[_0x19cf('0x32')][_0x19cf('0x47')]){this[_0x19cf('0xd')]=null;this[_0x19cf('0x6e')]=null;this[_0x19cf('0x15')]=null;return;}this[_0x19cf('0xd')]=firebase['database']()['ref']('map'+$gameMap['mapId']()['padZero'](0x3));this[_0x19cf('0x6e')]=this[_0x19cf('0xd')][_0x19cf('0x53')](this[_0x19cf('0x5b')][_0x19cf('0x26')]);this['selfRef'][_0x19cf('0xb')]()[_0x19cf('0x40')]();var _0xe956ed=this[_0x19cf('0x11')];var _0x41a259=this[_0x19cf('0x15')]={};if(!_0xe956ed[_0x19cf('0x0')][0x0][_0x19cf('0x4b')]){_0xe956ed[_0x19cf('0x0')][0x0]['list']=$dataCommonEvents[this['parameters'][_0x19cf('0x55')]][_0x19cf('0x4b')];}this['mapRef']['on'](_0x19cf('0x51'),function(_0x242011){if(OnlineManager[_0x19cf('0x4f')](_0x242011)){_0x41a259[_0x242011[_0x19cf('0x64')]]=new Game_Avatar(_0xe956ed,_0x242011[_0x19cf('0xf')]());}});this[_0x19cf('0xd')]['on'](_0x19cf('0x72'),function(_0x531611){if(OnlineManager[_0x19cf('0x4f')](_0x531611)){if(_0x41a259[_0x531611[_0x19cf('0x64')]]){_0x41a259[_0x531611['key']][_0x19cf('0x17')](_0x531611[_0x19cf('0xf')]());}else{_0x41a259[_0x531611[_0x19cf('0x64')]]=new Game_Avatar(_0xe956ed,_0x531611[_0x19cf('0xf')]());}}});this[_0x19cf('0xd')]['on'](_0x19cf('0x52'),function(_0x31db2c){if(OnlineManager[_0x19cf('0x4f')](_0x31db2c)){if(_0x41a259[_0x31db2c['key']])_0x41a259[_0x31db2c[_0x19cf('0x64')]][_0x19cf('0x14')]();delete _0x41a259[_0x31db2c[_0x19cf('0x64')]];}});this[_0x19cf('0x34')]();};OnlineManager[_0x19cf('0x2e')]=function(){var _0x8b9555=$gamePlayer;return{'x':_0x8b9555['x'],'y':_0x8b9555['y'],'direction':_0x8b9555[_0x19cf('0x6f')](),'speed':_0x8b9555[_0x19cf('0x73')](),'charaName':_0x8b9555[_0x19cf('0x27')](),'charaIndex':_0x8b9555['characterIndex']()};};OnlineManager['sendPlayerInfo']=function(){if(this[_0x19cf('0x6e')])this[_0x19cf('0x6e')][_0x19cf('0x25')](this[_0x19cf('0x2e')]());};OnlineManager[_0x19cf('0x5d')]=function(_0x25216d,_0x4f03fb){var _0x55d532=this[_0x19cf('0x2e')]();_0x55d532[_0x25216d]=_0x4f03fb;if(this[_0x19cf('0x6e')])this[_0x19cf('0x6e')]['update'](_0x55d532);};OnlineManager[_0x19cf('0x6')]=function(){if(this[_0x19cf('0x6e')])this['selfRef'][_0x19cf('0x40')]();};OnlineManager[_0x19cf('0x2c')]=function(){return DataManager[_0x19cf('0x63')]();};OnlineManager[_0x19cf('0x4f')]=function(_0xc9dc8b){return _0xc9dc8b[_0x19cf('0x64')]!==this[_0x19cf('0x5b')][_0x19cf('0x26')]&&this['mapExists']();};OnlineManager[_0x19cf('0x19')]=function(_0x2adb9c){return this[_0x19cf('0x3f')][_0x19cf('0x1a')]<=_0x2adb9c&&_0x2adb9c<=this[_0x19cf('0x3f')][_0x19cf('0x1c')];};OnlineManager[_0x19cf('0x1e')]=function(_0x370060){return this[_0x19cf('0x3f')]['syncVariableStart']<=_0x370060&&_0x370060<=this[_0x19cf('0x3f')][_0x19cf('0x57')];};OnlineManager[_0x19cf('0x71')]=function(_0x330663,_0xa2d65b){if(this[_0x19cf('0x6d')]&&!this[_0x19cf('0x2b')]&&this['switchInRange'](_0x330663)){var _0x2cecfc={};_0x2cecfc[_0x330663]=_0xa2d65b;this[_0x19cf('0x6d')][_0x19cf('0x25')](_0x2cecfc);}};OnlineManager[_0x19cf('0x9')]=function(_0x146a3f,_0x3c86e6){if(this[_0x19cf('0x31')]&&!this[_0x19cf('0x2b')]&&this[_0x19cf('0x1e')](_0x146a3f)){var _0x21629c={};_0x21629c[_0x146a3f]=_0x3c86e6;this[_0x19cf('0x31')][_0x19cf('0x25')](_0x21629c);}};var _0x3ad5f1=SceneManager[_0x19cf('0x45')];SceneManager[_0x19cf('0x45')]=function(){_0x3ad5f1[_0x19cf('0x60')](this,arguments);OnlineManager[_0x19cf('0x45')]();};var _0x25e218=DataManager[_0x19cf('0x35')];DataManager[_0x19cf('0x35')]=function(_0x21c296){if($gamePlayer[_0x19cf('0x23')]()||SceneManager[_0x19cf('0x12')](Scene_Load)){_0x25e218[_0x19cf('0x60')](this,arguments);}};var _0x4fe03d=Game_Player['prototype'][_0x19cf('0x3e')];Game_Player[_0x19cf('0x5e')]['moveStraight']=function(_0x3f0b3e){var _0x22418a=this[_0x19cf('0x6f')]();_0x4fe03d[_0x19cf('0x60')](this,arguments);if(this[_0x19cf('0x3a')]()||_0x3f0b3e!==_0x22418a){OnlineManager[_0x19cf('0x34')]();}};var _0x38607d=Game_Player[_0x19cf('0x5e')][_0x19cf('0x44')];Game_Player[_0x19cf('0x5e')]['setImage']=function(_0x1d9c7a,_0x48baba){_0x38607d[_0x19cf('0x60')](this,arguments);if(!this['isTransferring']())OnlineManager['sendPlayerInfo']();};var _0x236183=Game_Player[_0x19cf('0x5e')][_0x19cf('0x4')];Game_Player['prototype'][_0x19cf('0x4')]=function(){if($gameMap[_0x19cf('0x3b')]()===$gamePlayer[_0x19cf('0x48')]()){for(var _0x5d0239 in OnlineManager[_0x19cf('0x15')])OnlineManager[_0x19cf('0x15')][_0x5d0239][_0x19cf('0x14')]();}_0x236183[_0x19cf('0x60')](this,arguments);OnlineManager[_0x19cf('0x30')]();};var _0x4eeeb8=Scene_Map[_0x19cf('0x5e')][_0x19cf('0x22')];Scene_Map[_0x19cf('0x5e')][_0x19cf('0x22')]=function(){_0x4eeeb8[_0x19cf('0x60')](this,arguments);if(SceneManager[_0x19cf('0x12')](Scene_Load)){$gameMap[_0x19cf('0x65')]()['forEach'](function(_0x3032c8){if(_0x3032c8 instanceof Game_Avatar)_0x3032c8['erase']();});OnlineManager[_0x19cf('0x30')]();}};var _0x2bd667=Scene_Title[_0x19cf('0x5e')][_0x19cf('0x22')];Scene_Title[_0x19cf('0x5e')][_0x19cf('0x22')]=function(){OnlineManager[_0x19cf('0x6')]();_0x2bd667[_0x19cf('0x60')](this,arguments);};var _0x2fafa1=Game_Interpreter[_0x19cf('0x5e')][_0x19cf('0x1')];Game_Interpreter[_0x19cf('0x5e')][_0x19cf('0x1')]=function(_0x5b2801,_0xc99aac){_0x2fafa1[_0x19cf('0x60')](this,arguments);if(_0x5b2801[_0x19cf('0x62')]()===_0x19cf('0x4e')){switch(_0xc99aac[0x1]['toLowerCase']()){case _0x19cf('0x67'):var _0x2f2d21=this[_0x19cf('0x54')](0x0)['online'];$gameVariables[_0x19cf('0x6c')](+_0xc99aac[0x0],_0x2f2d21&&_0x2f2d21[_0xc99aac[0x2]]);break;case'to':OnlineManager['sendCustomInfo'](_0xc99aac[0x2],$gameVariables['value'](+_0xc99aac[0x0]));break;default:break;}}};var _0x515b87=Game_Switches[_0x19cf('0x5e')][_0x19cf('0x6c')];Game_Switches[_0x19cf('0x5e')]['setValue']=function(_0x1e2e1b,_0x3cb7a3,_0x1ee5cc){_0x515b87[_0x19cf('0x5f')](this,_0x1e2e1b,_0x3cb7a3);if(!_0x1ee5cc)OnlineManager[_0x19cf('0x71')](_0x1e2e1b,this[_0x19cf('0x28')](_0x1e2e1b));};var _0x25b9ff=Game_Variables['prototype'][_0x19cf('0x6c')];Game_Variables[_0x19cf('0x5e')][_0x19cf('0x6c')]=function(_0x5b9d68,_0x18ac91,_0x48ae6f){_0x25b9ff[_0x19cf('0x5f')](this,_0x5b9d68,_0x18ac91);if(!_0x48ae6f)OnlineManager[_0x19cf('0x9')](_0x5b9d68,this[_0x19cf('0x28')](_0x5b9d68));};var _0x3671bf=Game_Switches[_0x19cf('0x5e')][_0x19cf('0x45')];Game_Switches[_0x19cf('0x5e')][_0x19cf('0x45')]=function(){_0x3671bf[_0x19cf('0x60')](this,arguments);OnlineManager['startSync']();};var _0x25e537=Window_DebugEdit[_0x19cf('0x5e')][_0x19cf('0x25')];Window_DebugEdit[_0x19cf('0x5e')][_0x19cf('0x25')]=function(){_0x25e537['apply'](this,arguments);this['refresh']();};Game_Avatar['prototype']=Object['create'](Game_Event[_0x19cf('0x5e')]);Game_Avatar['prototype'][_0x19cf('0x74')]=Game_Avatar;Game_Avatar['prototype'][_0x19cf('0x45')]=function(_0x3a1acf,_0x49b196){var _0x56c996=$gameMap[_0x19cf('0x3b')]();var _0x33fd78=$gameMap['getEventIdSequence']?$gameMap[_0x19cf('0x36')]():$gameMap[_0x19cf('0xa')][_0x19cf('0x7')];['A','B','C','D']['forEach'](function(_0xa6aa0f){var _0x51a314=[_0x56c996,_0x33fd78,_0xa6aa0f];$gameSelfSwitches[_0x19cf('0x6c')](_0x51a314,![]);});this[_0x19cf('0x5')]=_0x3a1acf;Game_Event[_0x19cf('0x5e')][_0x19cf('0x45')][_0x19cf('0x5f')](this,_0x56c996,_0x33fd78);this[_0x19cf('0x66')](_0x49b196['x'],_0x49b196['y']);this[_0x19cf('0x13')](_0x49b196[_0x19cf('0x6f')]);this[_0x19cf('0x58')](_0x49b196[_0x19cf('0xe')]);this[_0x19cf('0x44')](_0x49b196[_0x19cf('0x2f')],_0x49b196['charaIndex']);this[_0x19cf('0x17')](_0x49b196);$gameMap[_0x19cf('0xa')][_0x19cf('0x39')](this);var _0x404acc=SceneManager[_0x19cf('0x10')];if(_0x404acc instanceof Scene_Map){var _0x4a19db=new Sprite_Character(this);_0x404acc[_0x19cf('0x1b')]['_characterSprites'][_0x19cf('0x39')](_0x4a19db);_0x404acc[_0x19cf('0x1b')][_0x19cf('0x70')][_0x19cf('0x2a')](_0x4a19db);}};Game_Avatar[_0x19cf('0x5e')]['event']=function(){return this[_0x19cf('0x5')];};Game_Avatar[_0x19cf('0x5e')][_0x19cf('0x17')]=function(_0x832168){this[_0x19cf('0x4e')]=_0x832168;};Game_Avatar[_0x19cf('0x5e')][_0x19cf('0x37')]=function(){this[_0x19cf('0x58')](this[_0x19cf('0x4e')][_0x19cf('0xe')]);this[_0x19cf('0x44')](this[_0x19cf('0x4e')][_0x19cf('0x2f')],this[_0x19cf('0x4e')][_0x19cf('0x3d')]);var _0x1e146a=$gameMap[_0x19cf('0x38')](this['x'],this['y'],this[_0x19cf('0x4e')]['x'],this[_0x19cf('0x4e')]['y']);if(_0x1e146a===0x0){this[_0x19cf('0x13')](this[_0x19cf('0x4e')][_0x19cf('0x6f')]);}else if(_0x1e146a>0x5){this[_0x19cf('0x66')](this[_0x19cf('0x4e')]['x'],this[_0x19cf('0x4e')]['y']);this[_0x19cf('0x13')](this['online'][_0x19cf('0x6f')]);}else{this[_0x19cf('0x4a')](this[_0x19cf('0x4e')]);}};}());